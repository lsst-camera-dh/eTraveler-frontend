<%-- 
    Document   : hardwareHeader
    Created on : Apr 22, 2013, 1:04:50 PM
    Author     : focke
--%>

<%@tag description="Displays a little info about a component" pageEncoding="US-ASCII"%>

<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %>

<%-- The list of normal or fragment attributes can be specified here: --%>
<%@attribute name="hardwareId" required="true"%>

<sql:query var="hardwareQ" dataSource="jdbc/rd-lsst-cam">
    select H.*, HT.name from Hardware H, HardwareType HT
    where 
    HT.id=H.typeId
    and
    H.id=?<sql:param value="${hardwareId}"/>;
</sql:query>
<c:set var="hardware" value="${hardwareQ.rows[0]}"/>
<h1>
    <c:url var="hwLink" value="displayHardware.jsp">
        <c:param name="hardwareId" value="${hardware.id}"/>
    </c:url>
    <c:out value="${hardware.name}"/> <a href="<c:out value="${hwLink}"/>"><c:out value="${hardware.lsstId}"/></a>
</h1>
<h2>
    Created at <c:out value="${hardware.creationTS}"/> by <c:out value="${hardware.createdBy}"/>
</h2>

<c:set var="hardwareTypeId" value="${hardware.typeId}" scope="request"/>
